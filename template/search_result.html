{% extends 'index.html' %}
{% load i18n %}
{% block header %}
<!-- leaflet link api (map api) -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
<style>
    #map{
        width: 100%;
        height: 90vh;
    }
</style>
{% endblock %}
{% block search_result %}
    <div class="row">
        <div class="col-1"></div>
        <div class="col-10">
            <div class="card">
                <div class="card-body text-start p-5">
                    <h5 class="card-title text-center"><b>{% trans "Search Results" %}</b></h5>
                    <div class="row">
                        <div class="col-6">
                            <p class="card-text">{% trans "IP Address: " %}<span id="ip-address">{{ip_address}}</span></p>
                            <p class="card-text">{% trans "Region Name: " %}<span id="latitude">{{ rg_name }}</span></p>
                            <p class="card-text">{% trans "Region: " %}<span id="longitude">{{region}}</span></p>
                            <p class="card-text">{% trans "Country: " %}<span id="longitude">{{country}}</span></p>
                            <p class="card-text">{% trans "Country Code: " %}<span id="longitude">{{country_code}}</span></p>
                        </div>
                        <div class="col-6">
                            <p class="card-text">{% trans "City: " %}<span id="longitude">{{city}}</span></p>
                            <p class="card-text">{% trans "Latitude: " %}<span id="longitude">{{latitude}}</span></p>
                            <p class="card-text">{% trans "Longitude: " %}<span id="longitude">{{longitude}}</span></p>
                            <p class="card-text">{% trans "Internet Service Provider: " %}<span id="longitude">{{isp}}</span></p>
                            <p class="card-text">{% trans "Organization: " %}<span id="longitude">{{org}}</span></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pt-2">
                <div id="map" class="pt-5">{% trans "Map" %}</div>
            </div>
        </div>
    </div>
    
    
{% endblock %}

{% block footer %}
    <!-- get the map api from leaflet https://leafletjs.com/ -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // show map by leaflet api
        var map = L.map('map').setView([{{latitude}}, {{longitude}}], 11);

        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        L.marker([{{latitude}}, {{longitude}}]).addTo(map)
            .bindPopup('Searching location resault')
            .openPopup();
            
    </script>
{% endblock %}